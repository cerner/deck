<form name="form" class="container-fluid form-horizontal" name="form" ng-controller="dcosServerGroupEnvironmentVariablesController as environmentVariableController" novalidate>
  <div class="form-group">
    <h5 class="col-sm-12">
            Set variables for each task your service launches. You can also use variables to expose Secrets.
            <a href="https://mesosphere.github.io/marathon/docs/task-environment-vars.html">
                Learn more about variables.
            </a>
        </h5>
    <table class="table table-condensed packed">
      <tbody>
        <tr ng-repeat="environmentVariable in command.env">
          <td>
            <div class="col-md-1 sm-label-right">
              Name
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control input-sm col-md-3" name="varName" ng-model="environmentVariable.name" validate-unique="environmentVariable.checkUnique"/>
              <div class="error-message" ng-if="form.$error.validateUnique">Duplicate key</div>
            </div>
            <div class="col-md-1 sm-label-right">
              Value
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control input-sm col-md-3" name="varValue" ng-change="environmentVariableController.updateValue($index)" ng-model="environmentVariable.rawValue" />
            </div>
            <div class="col-md-1 sm-label-right">
              Secret
            </div>
            <div class="col-md-1">
              <input type="checkbox" name="secretCheck" ng-model="environmentVariable.secret"
               ng-click="environmentVariableController.updateSecret($index, environmentVariable.isSecret)"/>
            </div>

            <a class="btn btn-link sm-label pull-right" ng-click="environmentVariableController.removeEnvironmentVariable($index)">
              <span class="glyphicon glyphicon-trash"></span>Remove Environment Variable
            </a>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="1">
            <button class="add-new col-md-12" ng-click="environmentVariableController.addEnvironmentVariable()">
                            <span class="glyphicon glyphicon-plus-sign"></span> Add Environment Variable
                        </button>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</form>
